# golangci-lint Version Information

## Current Version: v2.5.0

We use golangci-lint **v2.5.0** with the official `golangci/golangci-lint-action@v8` GitHub Action.

### Why v2.5.0?

1. **Latest Stable Release**: v2.5.0 is the current stable version with all modern features
   - Improved performance and accuracy
   - Better configuration management
   - Active development and support

2. **GitHub Actions Compatibility**: 
   - `golangci-lint-action@v8` is designed specifically for golangci-lint v2.x
   - Removed the deprecated `--out-format` flag (uses config-based formatting)
   - Clean integration with GitHub Actions workflow

3. **Version 2 Configuration Format**:
   - Requires `version: '2'` in `.golangci.yml`
   - Uses `linters.exclusions.rules` for path-based exclusions
   - Modern `output.formats` structure

### GitHub Action Compatibility Matrix

| Action Version | golangci-lint Version | Notes |
|----------------|----------------------|-------|
| **v8.x** | **v2.1.0+** | **Current** - Full v2 support, no default format |
| v7.x | v2.x only | v2 only support |
| v6.x | v1.x / v2.x | Removed annotations, default format |
| v4.x | v1.28.3+ | Requires explicit actions/setup-go |

**Source**: https://github.com/golangci/golangci-lint-action#compatibility

### Configuration Format

Our current `.golangci.yml` uses **version 2** format:

```yaml
version: '2'

linters:
  exclusions:
    rules:
      - path: ^examples/
        linters:
          - errcheck
          - gocritic

output:
  formats:
    text:
      print-linter-name: true
      print-issued-lines: true
```

Key differences from v1.x:
- Must include `version: '2'` at top of file
- `issues.exclude-rules` ‚Üí `linters.exclusions.rules`
- `output.format` ‚Üí `output.formats.{format-type}`

### Local Development

**Install golangci-lint v2.x locally**:

```bash
# macOS (Homebrew) - installs latest v2.x
brew install golangci-lint

# Linux/macOS - specific version
curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v2.5.0

# Verify installation
golangci-lint --version
```

**Run locally**:
```bash
# From project root
golangci-lint run --timeout=5m

# See what would run in CI
golangci-lint run --timeout=5m --out-format=github-actions
```

### CI/CD Configuration

Our GitHub Actions workflow (`.github/workflows/ci.yml`):

```yaml
- name: Run golangci-lint
  uses: golangci/golangci-lint-action@v8
  with:
    version: v2.5.0
    args: --timeout=5m
    only-new-issues: ${{ github.event_name == 'pull_request' }}
```

The action automatically:
- Downloads golangci-lint v2.5.0
- Reads configuration from `.golangci.yml`
- Formats output for GitHub Actions annotations
- Caches results for faster subsequent runs

### Philosophy: Examples vs Production Code

Our linting strategy distinguishes between example code and production code:

**Production code** (`cmd/`, `internal/`, root packages):
- ‚úÖ All errors must be checked (`errcheck`)
- ‚úÖ All code quality rules enforced
- ‚úÖ Strict linting for reliability

**Example code** (`examples/`):
- ‚ö†Ô∏è Exempted from `errcheck`, `gocritic`, `revive`, `staticcheck`
- üìñ Prioritizes readability and clarity
- üéØ Shows API usage without error-handling boilerplate

This is configured via path-based exclusions in `.golangci.yml`:
```yaml
linters:
  exclusions:
    rules:
      - path: ^examples/
        linters: [errcheck, gocritic, revive, staticcheck]
```
